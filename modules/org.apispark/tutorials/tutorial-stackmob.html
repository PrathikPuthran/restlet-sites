<#global content>
<div class='span3 left section toc'>
	<ul>
		<li><a href="#tutorial-stackmob-introduction">1. Introduction</a></li>
		<li><a href="#tutorial-stackmob-configuration">2. Configuration</a></li>
		<li><a href="#tutorial-stackmob-entity-wrapper">3. StackMob entity store wrapper configuration</a></li>
		<li><a href="#tutorial-stackmob-using">4. Using the entity store wrapper</a></li>
	</ul>
</div>
<div class='span6 left section'>
	<h3>Exposing custom APIs for StackMob backends</h3>

	<h4>
		<a id="tutorial-stackmob-introduction" name="tutorial-stackmob-introduction"></a>1. Introduction
	</h4>

	<p>This tutorial describes how to create a custom web API that reexposes existing data stored
	in a StackMob backend. StackMob is a popular Backend as a Service (BaaS) provider that powers
	connected mobile applications.</p>

    <p>APISpark provides an entity store wrapper for existing StackMob data that can be reexposed
    through one or more custom web APIs.</p>

	<h4>
		<a id="tutorial-stackmob-configuration" name="tutorial-stackmob-configuration"></a>2. Configuration
	</h4>

    <p>Let’s get started by configuring a StackMob schema named Contact with following fields :</p>

    <ul>
    	<li><strong>contact_id</strong> : autogenerated primary key</li>
    	<li><strong>lastName</strong> (string) : last name</li>
    	<li><strong>firstName</strong> (string) : first name</li>
    	<li><strong>age</strong> (integer) : age</li>
    </ul>

    <p>The following screen shots illustrate the configuration steps using the Schema configuration tab in the dashboard.</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-01.png"
                   width="433">
    </p>

    <p>As we want security for our data in StackMob, we define the access rights:</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-02.png"
                   width="433">
    </p>

    <p>In order to use OAuth2 for your application, you need to create a “User” schema in stackMob. The authentification will be based on this data.</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-03.png"
                   width="533">
    </p>

    <p>with the following access rights:</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-04.png"
                   width="533">
    </p>

    <p>You will then simply add a user in this schema. This user will be used to authenticate from the APISpark platform with OAuth2.</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-05.png"
                   width="533">
    </p>

    <p>Then, to configure the StackMob application in APISpark, you will need the application key available from the App Information & Keys screen :</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-06.png"
                   width="533">
    </p>

	<h4>
		<a id="tutorial-stackmob-entity-wrapper" name="tutorial-stackmob-entity-wrapper"></a>2. StackMob entity store wrapper configuration
	</h4>

	<p>The second step is to plug your API on your existing StackMob schema. Unfortunately StackMob doesn’t provide at the moment intropection support of schemas. This means that APISpark can’t provide automatic configuration and you need to manually configure the mapping between APISpark and StackMob schemas. But no worry, such configuration is actually quite simple.</p>

	<p>First, you need to create an entity store with a source of type “StackMob”. This is the way to create a StackMob entity store wrapper.</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-07.png"
                   width="533">
    </p>

	<p>Then configure the general hints to access your StackMob application in the Settings tab (entry Stack Mob Account), meaning setting the public and private keys previously gotten.</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-08.png"
                   width="533">
    </p>

	<p>If the entity field names in APISpark exactly match, you simply have to create an entity with same name and same fields within the store:</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-09.png"
                   width="533">
    </p>

	<p>It’s possible that there is a gap between your entity elements and the schema elements in StackMob. For this purpose, you can use the Mapping tab of the entity. This allows specifying the mapping between each element (entity name and field names).</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-10.png"
                   width="533">
    </p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-11.png"
                   width="533">
    </p>

	<h4>
		<a id="tutorial-stackmob-using" name="tutorial-stackmob-using"></a>3. Using the entity store wrapper
	</h4>

	<p>Since such an entity store wrapper is an entity store, you can simply import it from a Web API project and use it to build your API. See this other tutorial for more details on this feature.</p>

	<p>Nevertheless you need to deploy your store to make it actually usable at runtime. For this simply use the “Deploy” button in the store header.</p>

    <p>
	    <img src="/images/tutorials/tutorial-stackmob-12.png"
                   width="533">
    </p>

</div>
</#global>
